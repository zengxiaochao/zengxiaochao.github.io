# 安装
rpm -ivh --prefix=/usr/local/clamav clamav-0.104.2.linux.x86_64.rpm

# 配置
- 创建用户组
groupadd clamav
useradd -g clamav clamav

- 创建存储目录
mkdir -p /opt/clamav/update
mkdir -p /opt/clamav/logs
touch /opt/clamav/logs/freshclam.log

- 用户加权
chown clamav:clamav /opt/clamav/logs/clamd.log
chown clamav:clamav /opt/clamav/logs/freshclam.log
chown clamav:clamav /opt/clamav/update
chown clamav:clamav /opt/clamav/
chown clamav:clamav /opt/clamav
chown clamav:clamav /

- 编辑配置文件
cp /usr/local/clamav/etc/freshclam.conf.sample /usr/local/clamav/etc/freshclam.conf
vim /usr/local/clamav/etc/freshclam.conf

```
#Example　　//注释掉这一行
#添加以下内容
DatabaseDirectory /opt/clamav/update
UpdateLogFile /opt/clamav/logs/freshclam.log
PidFile /opt/clamav/update/freshclam.pid
```

- 覆盖配置文件
cp /usr/local/clamav/etc/*.conf /usr/local/etc/

# 使用
- 更新病毒库
/usr/local/clamav/bin/freshclam

- 递归扫描记录日志
/usr/local/clamav/bin/clamscan -r -i /home  -l  /opt/clamav/202407181109.log


# 卸载
rpm remove clamav



# 备注
启动时报错clamscan: error while loading shared libraries: libclamav.so.9: cannot open shared object找不到库文件
vim /etc/ld.so.conf

追加一行`/usr/local/clamav/lib64`
- 更新库文件
ldconfig
